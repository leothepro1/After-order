{
  "id": "klistermärken",
  "title": "klistermärken",
  "version": "1.1.0",
  "currency": "SEK",
  "options": [
    {
      "id": "size",
      "label": "Storlek (BxH)",
      "type": "select",
      "default": 1,
      "choices": [
        { "value": 1, "code": "4x4",   "label": "4×4 cm",   "w_cm": 4,  "h_cm": 4,  "area_cm2": 16 },
        { "value": 2, "code": "6x6",   "label": "6×6 cm",   "w_cm": 6,  "h_cm": 6,  "area_cm2": 36 },
        { "value": 3, "code": "8x8",   "label": "8×8 cm",   "w_cm": 8,  "h_cm": 8,  "area_cm2": 64 },
        { "value": 4, "code": "10x10", "label": "10×10 cm", "w_cm": 10, "h_cm": 10, "area_cm2": 100 },
        { "value": 5, "code": "14x14", "label": "14×14 cm", "w_cm": 14, "h_cm": 14, "area_cm2": 196 },
        { "value": "custom", "code": "custom", "label": "Egen storlek (cm)" }
      ],
      "customTierRules": {
        "type": "area_cm2",
        "breakpoints": [25, 50, 80, 120, 200, 300],
        "tiers":       [1,   2,  3,   4,   5,   6,   7]
      },
      "ui": { "component": "shared-select" },
      "export": true    
    },
    {
        "id": "qty",
      "label": "Antal",
      "type": "select",
      "default": 50,
      "choices": [
        { "value": 50, "label": "50" },
        { "value": 80, "label": "80" },
        { "value": 200, "label": "200" },
        { "value": 300, "label": "300" },
        { "value": 500, "label": "500" },
        { "value": 600, "label": "600" },
        { "value": 900, "label": "900" },
        { "value": 1200, "label": "1 200" },
        { "value": 1500, "label": "1 500" },
        { "value": 2000, "label": "2 000" },
        { "value": 5000, "label": "5 000" }
      ],
      "customChoices": [
        { "value": 100,  "label": "100" },
        { "value": 200,  "label": "200" },
        { "value": 300,  "label": "300" },
        { "value": 500,  "label": "500" },
        { "value": 600,  "label": "600" },
        { "value": 900,  "label": "900" },
        { "value": 1200, "label": "1 200" },
        { "value": 1500, "label": "1 500" },
        { "value": 2000, "label": "2 000" }
      ],
      "ui": { "component": "shared-select" },
      "export": true
    }
  ],
  "tables": {
    "unit_price": {
      "rows": [50, 80, 200, 300, 500, 600, 900, 1200, 1500, 2000, 5000],
      "cols": [1, 2, 3, 4, 5, 6, 7],
      "data": [
        [4.68, 6.76, 9, 12.01, 17.49, 17.49, 9.81],
        [3.16,  5.5, 6.52, 9.01, 16.7, 16.57,  9.81],
        [2.56,  3.82, 5.25, 6.81, 10.32, 10.30,  7.66],
        [2.08,  3.23, 4.27,  5.86, 7.68,  8.98,   3.22],
        [1.68,  2.71, 3.53,  4.90, 7.27,  8.97,   3.22],
        [1.56,  2.53, 3.31,  4.62, 6.51,  7.65,    2.53],
        [1.33,  2.23, 2.89,  4.06, 6.06,  7.25,   2.17],
        [1.19, 1.94, 2.66, 3.74, 5.75,  6.49,   1.84],
        [1.09, 1.88, 2.49, 3.52, 5.39,  5.85,   1.4],
        [0.99, 1.72, 2.28, 3.26, 4.55,  5.64,   1.2],
        [0.73, 1.35, 1.82, 2.65, 4.55,  5.44,   0.99]
      ]
    },
   "unit_price_custom_by_cm": {
  "rows": [4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],
  "cols": [4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],
  "data": [
  [2.988,3.4512,3.456,3.144,3.6,4.944,5.112,6.144,6.144,6.144,6.258,6.9,4.74,5.07,5.364,5.664,5.964,6.144,6.552,6.858,7.152,7.452,7.452,7.452,7.452,7.452,7.452],
   [3.4512,4.008,4.572,3.936,4.488,5.208,2.808,5.52,5.64,6.036,5.208,5.964,6.336,6.708,7.08,7.452,7.452,7.452,7.452,7.476,7.488,7.5,7.512,7.524,7.536,7.548,7.56],
 [3.456,4.572,4.572,4.668,5.388,6.972,3.372,5.412,5.424,5.814,3.372,6.708,7.152,7.176,5.472,7.152,6.708,7.584,7.68,7.8,7.92,8.04,8.16,8.28,8.4,8.4,8.4],
[3.144,3.936,4.668,4.488,5.04,5.136,3.936,5.736,6.24,6.78,3.936,7.302,7.3068,5.736,7.32,7.44,7.44,7.704,7.836,7.848,7.86,7.872,7.884,7.896,8.76,9.36,9.12],
 [3.6,4.488,4.668,4.488,4.77,5.688,4.488,5.736,7.152,7.302,4.488,7.836,7.848,7.86,7.872,7.884,7.896,8.76,7.836,7.848,7.86,7.872,7.884,7.896,8.76,9.36,9.12],
  [4.05,5.04,4.668,4.488,4.488,5.868,5.04,5.376,7.836,7.848,5.04,7.872,7.884,7.896,8.76,9.36,9.12,9.6,7.836,7.848,7.86,7.872,7.884,7.896,8.76,9.36,9.36],
[4.494,5.52,4.668,4.488,4.488,5.868,5.52,6.558,7.896,8.76,5.52,9.12,9.6,9.72,9.8772,9.96,9.984,10.14,10.272,8.76,9.36,9.12,8.76,9.36,9.12,8.76,10.272],
[4.944,5.52,4.668,4.488,6.558,5.868,5.52,7.896,8.76,9.36,5.52,8.76,9.36,9.12,9.96,9.144,9.144,9.144,9.144,9.144,9.984,10.14,10.272,10.14,10.272,10.272,10.272],
[4.944,4.44,4.668,6.24,7.152,4.44,4.44,8.76,6.912,6.912,4.44,7.836,7.896,9.36,9.12,9.96,9.144,9.144,9.144,9.144,9.144,9.984,10.14,10.272,10.14,10.272,10.272],
[4.944,4.836,5.814,6.78,7.302,7.068,4.836,9.36,6.912,6.384,4.836,6.948,6.984,7.02,5.868,6.984,6.984,8.184,8.184,8.064,8.064,8.064,8.064,8.064,10.14,10.272,12.03],
[4.944,5.208,6.24,7.302,5.376,7.068,5.208,9.12,7.152,6.876,5.208,7.938,8.46,8.994,8.994,8.994,7.938,7.938,8.82,9.222,9.624,9.96,10.152,10.83,11.25,11.628,12.888],
[4.5,5.964,6.708,7.302,7.836,5.964,5.964,8.76,7.836,6.948,5.964,8.502,9.066,9.066,7.938,8.166,8.592,9.03,9.456,10.002,10.314,11.172,11.604,12.03,12.462,12.462,13.164],
[4.74,6.336,7.152,7.3068,7.848,6.336,6.336,9.36,7.896,6.984,6.336,9.066,7.332,7.74,8.22,8.706,9.168,9.63,10.086,10.542,10.992,11.46,11.916,12.378,12.462,12.888,13.164],
[5.07,6.708,7.176,5.736,7.86,6.708,6.708,9.12,9.36,7.02,6.708,9.066,7.74,8.28,8.76,9.252,9.738,10.224,10.716,11.202,11.688,12.174,12.66,13.188,13.638,14.124,13.2],
[5.364,7.08,5.472,7.32,7.872,7.08,7.08,9.96,9.12,5.868,7.08,7.938,8.22,8.76,9.282,9.738,10.224,10.716,11.202,11.688,12.174,12.66,13.188,13.638,14.124,13.164,14.322],
[5.664,7.452,7.152,7.44,7.884,9.36,9.96,9.144,9.96,6.984,8.994,8.166,8.706,9.252,9.738,10.344,10.8,11.424,11.976,12.516,13.062,13.608,14.154,14.154,14.154,14.154,14.322],
[5.964,7.452,6.708,7.44,7.896,9.12,9.984,9.144,9.144,6.984,7.938,8.592,9.168,9.738,10.224,10.8,11.46,12.03,12.606,13.176,13.752,14.322,14.322,13.752,14.322,14.322,14.4],
[6.144,7.452,7.584,7.704,8.76,9.6,10.14,9.144,9.144,8.184,7.938,9.03,9.63,10.224,10.716,11.424,12.03,12.63,12.036,13.836,14.322,14.322,13.752,14.322,14.322,14.322,11.388],
[6.552,7.452,7.68,7.836,7.836,7.836,10.272,9.144,9.144,8.184,8.82,9.456,10.086,10.716,11.202,11.976,12.606,12.036,13.86,13.86,11.388,11.388,11.388,12.378,11.388,11.388,14.322],
[6.858,7.476,7.8,7.848,7.848,7.848,8.76,9.144,9.144,8.064,9.222,10.002,10.542,11.202,9.984,9.144,9.984,9.144,13.86,10.95,11.424,11.904,12.378,14.124,13.164,13.2,14.4],
[7.152,7.488,7.92,7.86,7.86,7.86,9.36,9.984,9.144,8.064,9.984,9.144,9.984,9.144,10.14,9.984,10.14,9.984,11.388,11.424,11.904,12.378,14.124,13.164,13.2,14.322,14.52],
[7.452,7.5,8.04,7.872,7.872,7.872,9.12,10.14,9.984,8.064,10.14,9.984,10.14,9.984,10.272,10.14,10.272,10.14,11.388,11.904,12.378,14.124,13.164,13.164,13.164,13.164,14.64],
[7.452,7.512,8.16,7.884,7.884,7.884,8.76,10.272,10.14,8.064,10.272,10.14,10.272,10.14,10.14,10.272,10.14,10.272,11.388,12.378,14.124,13.164,13.2,13.2,13.2,13.2,14.64],
[7.452,7.524,8.28,7.896,7.896,7.896,9.36,10.14,10.272,8.064,10.14,10.272,10.14,10.272,10.272,10.14,10.272,10.14,12.378,14.124,13.164,13.2,14.322,14.322,14.322,14.322,14.64],
[7.452,7.536,8.4,8.76,8.76,8.76,9.12,10.272,10.14,10.14,10.272,10.14,10.272,10.14,10.272,10.272,10.272,10.272,11.388,13.164,13.2,14.322,14.4,14.4,14.4,14.4,14.64],
[7.452,7.548,8.4,9.36,9.36,9.36,8.76,10.272,10.272,10.272,10.272,10.272,10.272,10.272,10.272,10.272,10.272,10.272,11.388,13.2,14.322,14.4,14.52,14.52,14.52,14.52,14.64],
[7.56,7.56,8.4,9.12,9.12,9.12,9.36,10.272,10.272,10.272,10.272,10.272,10.272,10.272,9.36,9.36,9.36,9.36,11.388,14.322,14.4,14.52,14.64,14.64,14.64,14.64,14.64]
  ]
}
  },
"formulas": {
  "tier": "size === 'custom' ? resolveTierByArea(size_w_cm, size_h_cm, 'size.customTierRules') : size",
"unit_price": "((size === 'custom' ? table('unit_price_custom_by_cm', size_h_cm, size_w_cm) * (qty === 100 ? 1.50 : qty === 200 ? 1 : qty === 300 ? 0.68 : qty === 500 || qty === 600 ? 0.66 : qty === 1200 || qty === 1500 ? 0.33 : qty === 900 ? 0.43 : qty === 2000 ? 0.25 : 1) : table('unit_price', qty, tier)) * 1.2)",
  "total_price": "unit * qty"
  },
  "export": ["size", "qty", "size_w_cm", "size_h_cm"]
}
